{"ast":null,"code":"var _jsxFileName = \"/home/allan/Projects/Trybe-Projects/sd-013-b-project-recipes-app/src/Pages/MealDetails.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Link } from 'react-router-dom';\nimport CustomCarousel from './CustomCarousel';\nimport FavoriteButton from './Utils/FavoriteButton';\n\nconst copy = require('clipboard-copy');\n\nexport default function MealDetalis() {\n  const [mealDetails, setMealDetails] = useState({});\n  const [copyLink, setCopyLink] = useState(false); // const [inProgress, setinProgress] = useState(false);\n\n  const [drinks, setDrinks] = useState([]);\n  const recipesDone = JSON.parse(localStorage.getItem('doneRecipes'));\n  let recipeInProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  if (recipeInProgress) recipeInProgress = recipeInProgress.meals;\n  if (!recipeInProgress) recipeInProgress = {};\n  const test = recipesDone || [];\n  const SIX = 6; // id => API\n\n  const locationToClipboard = useLocation().pathname;\n\n  const getLocation = () => {\n    const clipboardLocation = `http://localhost:3000${locationToClipboard}`;\n    return clipboardLocation;\n  };\n\n  const id = useLocation().pathname.replace('/comidas/', '');\n  const test2 = test.some(recipe => recipe.id === id); // ref: Lucas Caribé\n\n  const youtubeSource = mealDetails.strYoutube ? mealDetails.strYoutube.replace(/watch\\?v=/, 'embed/') : '';\n  const str1 = 'accelerometer; autoplay; clipboard-write;';\n  const str2 = 'encrypted-media; gyroscope; picture-in-picture';\n  const youtubeConf = str1 + str2;\n  const TWENTY = 20;\n  const ingredientList = [];\n\n  const fetchMealIdAPi = async () => {\n    const response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`).then(res => res.json());\n    setMealDetails(response.meals[0]);\n  };\n\n  async function fetchDrinkAPI() {\n    const APIDrinks = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n    const response = await fetch(APIDrinks).then(resp => resp.json());\n    setDrinks(response.drinks.slice(0, SIX));\n  }\n\n  useEffect(() => {\n    fetchDrinkAPI();\n    fetchMealIdAPi();\n  }, []);\n  const firstCarousel = drinks.length ? [drinks[0], drinks[2], drinks[4]] : [];\n  const secondCarousel = drinks.length ? [drinks[1], drinks[3], drinks[5]] : [];\n\n  for (let index = 1; index <= TWENTY; index += 1) {\n    if (mealDetails[`strIngredient${index}`] !== '') {\n      ingredientList.push({\n        [`ingredients${index}`]: mealDetails[`strIngredient${index}`],\n        [`measure${index}`]: mealDetails[`strMeasure${index}`]\n      });\n    }\n  }\n\n  const hiddenButton = /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"start-recipe-btn\",\n    className: \"startRecipeButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, recipeInProgress[id] ? 'Continuar Receita' : 'Iniciar Receita');\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"img\", {\n    src: mealDetails.strMealThumb,\n    alt: \"img-Details\",\n    \"data-testid\": \"recipe-photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, mealDetails.strMeal), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setCopyLink(true);\n      copy(getLocation());\n    },\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"Compartilhar\"), /*#__PURE__*/React.createElement(FavoriteButton, {\n    props: {\n      mealDetails\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }), copyLink && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 20\n    }\n  }, \"Link copiado!\"), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, mealDetails.strCategory), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }, ingredientList.map((ingredient, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    \"data-testid\": `${index}-ingredient-name-and-measure`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, `${ingredient[`ingredients${index + 1}`]} \n              - ${ingredient[`measure${index + 1}`]}`))), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, mealDetails.strInstructions), /*#__PURE__*/React.createElement(\"iframed-block\", {\n    \"w-100\": true,\n    src: youtubeSource,\n    \"data-testid\": \"video\",\n    title: \"YouTube video player\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: youtubeConf,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomCarousel, {\n    props: {\n      firstCarousel,\n      secondCarousel\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: `/comidas/${id}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, !test2 ? hiddenButton : null));\n}","map":{"version":3,"sources":["/home/allan/Projects/Trybe-Projects/sd-013-b-project-recipes-app/src/Pages/MealDetails.jsx"],"names":["React","useState","useEffect","useLocation","Link","CustomCarousel","FavoriteButton","copy","require","MealDetalis","mealDetails","setMealDetails","copyLink","setCopyLink","drinks","setDrinks","recipesDone","JSON","parse","localStorage","getItem","recipeInProgress","meals","test","SIX","locationToClipboard","pathname","getLocation","clipboardLocation","id","replace","test2","some","recipe","youtubeSource","strYoutube","str1","str2","youtubeConf","TWENTY","ingredientList","fetchMealIdAPi","response","fetch","then","res","json","fetchDrinkAPI","APIDrinks","resp","slice","firstCarousel","length","secondCarousel","index","push","hiddenButton","strMealThumb","strMeal","strCategory","map","ingredient","strInstructions"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Link } from 'react-router-dom';\nimport CustomCarousel from './CustomCarousel';\n\nimport FavoriteButton from './Utils/FavoriteButton';\n\nconst copy = require('clipboard-copy');\n\nexport default function MealDetalis() {\n  const [mealDetails, setMealDetails] = useState({});\n  const [copyLink, setCopyLink] = useState(false);\n  // const [inProgress, setinProgress] = useState(false);\n  const [drinks, setDrinks] = useState([]);\n\n  const recipesDone = JSON.parse(localStorage.getItem('doneRecipes'));\n  let recipeInProgress = JSON\n    .parse(localStorage.getItem('inProgressRecipes'));\n  if (recipeInProgress) recipeInProgress = recipeInProgress.meals;\n  if (!recipeInProgress) recipeInProgress = {};\n  const test = recipesDone || [];\n  const SIX = 6;\n\n  // id => API\n  const locationToClipboard = useLocation().pathname;\n  const getLocation = () => {\n    const clipboardLocation = `http://localhost:3000${locationToClipboard}`;\n    return clipboardLocation;\n  };\n\n  const id = useLocation().pathname.replace('/comidas/', '');\n  const test2 = test.some((recipe) => recipe.id === id);\n\n  // ref: Lucas Caribé\n  const youtubeSource = mealDetails.strYoutube ? mealDetails\n    .strYoutube.replace(/watch\\?v=/, 'embed/') : '';\n  const str1 = 'accelerometer; autoplay; clipboard-write;';\n  const str2 = 'encrypted-media; gyroscope; picture-in-picture';\n  const youtubeConf = str1 + str2;\n  const TWENTY = 20;\n\n  const ingredientList = [];\n  const fetchMealIdAPi = async () => {\n    const response = await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`).then((res) => res.json());\n    setMealDetails(response.meals[0]);\n  };\n\n  async function fetchDrinkAPI() {\n    const APIDrinks = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n    const response = await fetch(APIDrinks).then((resp) => resp.json());\n    setDrinks(response.drinks.slice(0, SIX));\n  }\n\n  useEffect(() => {\n    fetchDrinkAPI();\n    fetchMealIdAPi();\n  }, []);\n\n  const firstCarousel = drinks.length ? [drinks[0], drinks[2], drinks[4]] : [];\n  const secondCarousel = drinks.length ? [drinks[1], drinks[3], drinks[5]] : [];\n\n  for (let index = 1; index <= TWENTY; index += 1) {\n    if (mealDetails[`strIngredient${index}`] !== '') {\n      ingredientList.push({\n        [`ingredients${index}`]: mealDetails[`strIngredient${index}`],\n        [`measure${index}`]: mealDetails[`strMeasure${index}`],\n      });\n    }\n  }\n\n  const hiddenButton = (\n    <button\n      type=\"button\"\n      data-testid=\"start-recipe-btn\"\n      className=\"startRecipeButton\"\n    >\n      {recipeInProgress[id] ? 'Continuar Receita' : 'Iniciar Receita'}\n    </button>);\n\n  return (\n    <>\n      <img\n        src={ mealDetails.strMealThumb }\n        alt=\"img-Details\"\n        data-testid=\"recipe-photo\"\n      />\n      <p data-testid=\"recipe-title\">{ mealDetails.strMeal }</p>\n      <button\n        onClick={ () => {\n          setCopyLink(true);\n          copy(getLocation());\n        } }\n        type=\"button\"\n        data-testid=\"share-btn\"\n      >\n        Compartilhar\n      </button>\n      <FavoriteButton props={ { mealDetails } } />\n      {copyLink && <p>Link copiado!</p>}\n      <p data-testid=\"recipe-category\">{mealDetails.strCategory}</p>\n      <ul>\n        { ingredientList.map((ingredient, index) => (\n          <li key={ index } data-testid={ `${index}-ingredient-name-and-measure` }>\n            {\n              `${ingredient[`ingredients${index + 1}`]} \n              - ${ingredient[`measure${index + 1}`]}`\n            }\n          </li>))}\n      </ul>\n      <h3>Instruções</h3>\n      <p data-testid=\"instructions\">{mealDetails.strInstructions}</p>\n      <iframed-block\n        w-100\n        src={ youtubeSource }\n        data-testid=\"video\"\n        title=\"YouTube video player\"\n        frameBorder=\"0\"\n        allow=\"accelerometer;\n         autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        allowFullScreen={ youtubeConf }\n      />\n      <CustomCarousel props={ { firstCarousel, secondCarousel } } />\n      <Link to={ `/comidas/${id}/in-progress` }>\n        {!test2 ? hiddenButton : null}\n      </Link>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}