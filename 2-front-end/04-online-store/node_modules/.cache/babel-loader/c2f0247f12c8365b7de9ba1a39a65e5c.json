{"ast":null,"code":"var _jsxFileName = \"/home/allan/Projects/Trybe-Projects/sd-013-b-project-frontend-online-store/src/components/ShoppingCart.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProductInCart from './ProductInCart';\nexport default class ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = (newQuantity, index) => {\n      const {\n        products\n      } = this.state;\n      products[index].quantity = newQuantity;\n      this.setState({\n        products\n      });\n    };\n\n    this.calculateTotal = () => {\n      const {\n        products\n      } = this.state;\n      const newTotal = products.reduce((acumulator, current) => acumulator + current.quantity * current.price, 0);\n      return newTotal;\n    };\n\n    const localStorageCartList = JSON.parse(localStorage.getItem('productList'));\n    const _products = [];\n    localStorageCartList.forEach(jsonProduct => {\n      _products.push({ ...JSON.parse(jsonProduct),\n        quantity: 1\n      });\n    });\n    this.state = {\n      products: _products\n    };\n  }\n\n  render() {\n    const {\n      products\n    } = this.state;\n\n    if (products.length === 0) {\n      return /*#__PURE__*/React.createElement(\"h2\", {\n        \"data-testid\": \"shopping-cart-empty-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 14\n        }\n      }, \"Seu carrinho est\\xE1 vazio\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 7\n      }\n    }, products.map((product, index) => /*#__PURE__*/React.createElement(ProductInCart, {\n      key: product.id,\n      product: product,\n      index: index,\n      handleChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, this.calculateTotal()), /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/checkout',\n        state: {\n          products,\n          total: this.calculateTotal()\n        }\n      },\n      \"data-testid\": \"checkout-products\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, \"Checkout\"));\n  }\n\n}","map":{"version":3,"sources":["/home/allan/Projects/Trybe-Projects/sd-013-b-project-frontend-online-store/src/components/ShoppingCart.jsx"],"names":["React","Component","Link","ProductInCart","ShoppingCart","constructor","props","handleChange","newQuantity","index","products","state","quantity","setState","calculateTotal","newTotal","reduce","acumulator","current","price","localStorageCartList","JSON","parse","localStorage","getItem","forEach","jsonProduct","push","render","length","map","product","id","pathname","total"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,eAAe,MAAMC,YAAN,SAA2BH,SAA3B,CAAqC;AAClDI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAYnBC,YAZmB,GAYJ,CAACC,WAAD,EAAcC,KAAd,KAAwB;AACrC,YAAM;AAAEC,QAAAA;AAAF,UAAe,KAAKC,KAA1B;AACAD,MAAAA,QAAQ,CAACD,KAAD,CAAR,CAAgBG,QAAhB,GAA2BJ,WAA3B;AACA,WAAKK,QAAL,CAAc;AACZH,QAAAA;AADY,OAAd;AAGD,KAlBkB;;AAAA,SAoBnBI,cApBmB,GAoBF,MAAM;AACrB,YAAM;AAAEJ,QAAAA;AAAF,UAAe,KAAKC,KAA1B;AACA,YAAMI,QAAQ,GAAGL,QAAQ,CAACM,MAAT,CAAgB,CAACC,UAAD,EAAaC,OAAb,KAC/BD,UAAU,GAAGC,OAAO,CAACN,QAAR,GAAmBM,OAAO,CAACC,KADzB,EAEd,CAFc,CAAjB;AAGA,aAAOJ,QAAP;AACD,KA1BkB;;AAEjB,UAAMK,oBAAoB,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CAA7B;AACA,UAAMd,SAAQ,GAAG,EAAjB;AACAU,IAAAA,oBAAoB,CAACK,OAArB,CAA8BC,WAAD,IAAiB;AAC5ChB,MAAAA,SAAQ,CAACiB,IAAT,CAAc,EAAE,GAAGN,IAAI,CAACC,KAAL,CAAWI,WAAX,CAAL;AAA8Bd,QAAAA,QAAQ,EAAE;AAAxC,OAAd;AACD,KAFD;AAGA,SAAKD,KAAL,GAAa;AACXD,MAAAA,QAAQ,EAARA;AADW,KAAb;AAGD;;AAkBDkB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAElB,MAAAA;AAAF,QAAe,KAAKC,KAA1B;;AACA,QAAID,QAAQ,CAACmB,MAAT,KAAoB,CAAxB,EAA2B;AACzB,0BAAO;AAAI,uBAAY,6BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP;AACD;;AACD,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGnB,QAAQ,CAACoB,GAAT,CAAa,CAACC,OAAD,EAAUtB,KAAV,kBACZ,oBAAC,aAAD;AACE,MAAA,GAAG,EAAGsB,OAAO,CAACC,EADhB;AAEE,MAAA,OAAO,EAAGD,OAFZ;AAGE,MAAA,KAAK,EAAGtB,KAHV;AAIE,MAAA,YAAY,EAAG,KAAKF,YAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADH,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,KAAKO,cAAL,EADJ,CATF,eAYE,oBAAC,IAAD;AACE,MAAA,EAAE,EAAG;AACHmB,QAAAA,QAAQ,EAAE,WADP;AAEHtB,QAAAA,KAAK,EAAE;AACLD,UAAAA,QADK;AAELwB,UAAAA,KAAK,EAAE,KAAKpB,cAAL;AAFF;AAFJ,OADP;AAQE,qBAAY,mBARd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAZF,CADF;AA2BD;;AA7DiD","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProductInCart from './ProductInCart';\n\nexport default class ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n    const localStorageCartList = JSON.parse(localStorage.getItem('productList'));\n    const products = [];\n    localStorageCartList.forEach((jsonProduct) => {\n      products.push({ ...JSON.parse(jsonProduct), quantity: 1 });\n    });\n    this.state = {\n      products,\n    };\n  }\n\n  handleChange = (newQuantity, index) => {\n    const { products } = this.state;\n    products[index].quantity = newQuantity;\n    this.setState({\n      products,\n    });\n  }\n\n  calculateTotal = () => {\n    const { products } = this.state;\n    const newTotal = products.reduce((acumulator, current) => (\n      acumulator + current.quantity * current.price\n    ), 0);\n    return newTotal;\n  }\n\n  render() {\n    const { products } = this.state;\n    if (products.length === 0) {\n      return <h2 data-testid=\"shopping-cart-empty-message\">Seu carrinho est√° vazio</h2>;\n    }\n    return (\n      <div>\n        {products.map((product, index) => (\n          <ProductInCart\n            key={ product.id }\n            product={ product }\n            index={ index }\n            handleChange={ this.handleChange }\n          />\n        ))}\n        <div>\n          { this.calculateTotal() }\n        </div>\n        <Link\n          to={ {\n            pathname: '/checkout',\n            state: {\n              products,\n              total: this.calculateTotal(),\n            },\n          } }\n          data-testid=\"checkout-products\"\n        >\n          Checkout\n        </Link>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}