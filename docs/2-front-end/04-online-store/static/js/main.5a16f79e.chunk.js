(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{17:function(t,e,a){"use strict";a.r(e),a.d(e,"getCategories",(function(){return l})),a.d(e,"getProductsFromCategoryAndQuery",(function(){return s}));var n=a(7),r=a.n(n),c=a(12),o="https://api.mercadolibre.com/sites/MLB/categories",i="https://api.mercadolibre.com/sites/MLB/search?category=";function l(){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(r.a.mark((function t(){var e,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(o);case 2:return e=t.sent,t.next=5,e.json();case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function t(){var e,a,n,c,o=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"&CATEGORY_ID",a=o.length>1&&void 0!==o[1]?o[1]:"$QUERY",t.next=4,fetch("".concat(i).concat(e,"&q=").concat(a));case 4:return n=t.sent,t.next=7,n.json();case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},26:function(t,e,a){t.exports=a(42)},31:function(t,e,a){},32:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),i=(a(31),a(1)),l=a(2),u=a(4),s=a(3),d=a(13),m=a(5),p=(a(32),a(19)),h=a(7),g=a.n(h),f=a(12),v=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(t){var n;Object(i.a)(this,a),(n=e.call(this,t)).handleClickMore=Object(f.a)(g.a.mark((function t(){var e,a,r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.props,a=e.handleChange,r=e.index,t.next=3,n.setState((function(t){return{quantity:t.quantity===t.maxQuantity?t.maxQuantity:t.quantity+1}}));case 3:c=n.state.quantity,console.log(c),a(c,r);case 6:case"end":return t.stop()}}),t)}))),n.handleClickLess=Object(f.a)(g.a.mark((function t(){var e,a,r,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.props,a=e.handleChange,r=e.index,t.next=3,n.setState((function(t){return{quantity:1===t.quantity?1:t.quantity-1}}));case 3:c=n.state.quantity,console.log(c),a(c,r);case 6:case"end":return t.stop()}}),t)})));var r=t.product;return n.state={quantity:1,maxQuantity:r.available_quantity},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.quantity,e=this.props.product;return r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},e.title),r.a.createElement("product",null,"Quantidade:",r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity"},t)),r.a.createElement("button",{"data-testid":"product-increase-quantity",type:"button",onClick:this.handleClickMore},"+"),r.a.createElement("button",{"data-testid":"product-decrease-quantity",type:"button",onClick:this.handleClickLess},"-"),r.a.createElement("br",null),r.a.createElement("span",null,e.price*t))}}]),a}(r.a.Component),b=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(t){var n;Object(i.a)(this,a),(n=e.call(this,t)).handleChange=function(t,e){var a=n.state.products;a[e].quantity=t,n.setState({products:a})},n.calculateTotal=function(){return n.state.products.reduce((function(t,e){return t+e.quantity*e.price}),0)};var r=JSON.parse(localStorage.getItem("productList")),c=[];return r.forEach((function(t){c.push(Object(p.a)(Object(p.a)({},JSON.parse(t)),{},{quantity:1}))})),n.state={products:c},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=this.state.products;return 0===e.length?r.a.createElement("h2",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"):r.a.createElement("div",null,e.map((function(e,a){return r.a.createElement(v,{key:e.id,product:e,index:a,handleChange:t.handleChange})})),r.a.createElement("div",null,this.calculateTotal()),r.a.createElement(d.b,{to:{pathname:"/checkout",state:{products:e,total:this.calculateTotal()}},"data-testid":"checkout-products"},"Checkout"))}}]),a}(n.Component),y=a(15),C=a(8),E=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"handleCartClick",value:function(t){var e=t.target,a=JSON.parse(localStorage.getItem("productList"));a.push(e.name),localStorage.setItem("productList",JSON.stringify(a))}},{key:"render",value:function(){var t=this,e=this.props,a=e.products,n=e.handleChangeQuantityInCart;return localStorage.getItem("productList")||localStorage.setItem("productList","[]"),r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{key:e.id,"data-testid":"product"},r.a.createElement(d.b,{to:"/details/".concat(e.id),"data-testid":"product-detail-link"},r.a.createElement("h3",null,e.title),r.a.createElement("img",{src:e.thumbnail,alt:""}),r.a.createElement("p",null,e.price)),!0===e.shipping.free_shipping&&r.a.createElement("p",{"data-testid":"free-shipping"},"Frete Gr\xe1tis"),r.a.createElement("button",{type:"button","data-testid":"product-add-to-cart",onClick:function(e){n(),t.handleCartClick(e)},name:JSON.stringify(e)},"Adcionar ao Carrinho"))})))}}]),a}(n.Component),O=a(17),k=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={loading:!0},n.handleCategory=n.handleCategory.bind(Object(C.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=Object(f.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.getCategories)();case 2:e=t.sent,this.updateState(e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleCategory",value:function(t){var e=t.target;(0,this.props.onChange)(e.value)}},{key:"updateState",value:function(t){this.setState({loading:!1,categories:t})}},{key:"render",value:function(){var t=this,e=this.state,a=e.loading,n=e.categories;return a?r.a.createElement("h3",null,"Loading"):r.a.createElement("div",null,n.map((function(e){var a=e.id,n=e.name;return r.a.createElement("div",{key:a},r.a.createElement("label",{htmlFor:a,"data-testid":"category"},r.a.createElement("input",{type:"radio",name:"category",id:a,value:a,onChange:t.handleCategory}),n))})))}}]),a}(n.Component),j=a(17),S=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(t){var n;Object(i.a)(this,a),(n=e.call(this,t)).handleChangeQuantityInCart=function(){var t=n.state.amountProductsInCart+1;n.setState({amountProductsInCart:t}),localStorage.setItem("amountProductsInCart",JSON.stringify(t))},n.handleClick=function(){var t=n.state.searchText;return j.getProductsFromCategoryAndQuery("&CATEGORY_ID",t).then((function(t){n.setState({products:t.results})}))},n.handleChange=function(t){var e=t.target;n.setState(Object(y.a)({},e.name,e.value))};var r=JSON.parse(localStorage.getItem("amountProductsInCart"));return n.state={searchText:"",products:[],amountProductsInCart:r},n.handleChangeCategory=n.handleChangeCategory.bind(Object(C.a)(n)),n}return Object(l.a)(a,[{key:"handleChangeCategory",value:function(t){var e=this;return j.getProductsFromCategoryAndQuery(t).then((function(t){e.setState({products:t.results})}))}},{key:"render",value:function(){var t=this.state,e=t.searchText,a=t.products,n=t.amountProductsInCart;return localStorage.getItem("amountProductsInCart")||localStorage.setItem("amountProductsInCart","0"),r.a.createElement("main",null,r.a.createElement("label",{htmlFor:"input-search-bar"},r.a.createElement("h3",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("input",{name:"searchText",type:"text",id:"input-search-bar","data-testid":"query-input",value:e,onChange:this.handleChange}),r.a.createElement("button",{type:"button","data-testid":"query-button",onClick:this.handleClick},"Pesquisar")),r.a.createElement(d.b,{to:"shoppingcart","data-testid":"shopping-cart-button"},"Carrinho"),r.a.createElement("span",{"data-testid":"shopping-cart-size"},n),r.a.createElement(k,{onChange:this.handleChangeCategory}),r.a.createElement(E,{products:a,handleChangeQuantityInCart:this.handleChangeQuantityInCart}))}}]),a}(n.Component),x=a(25),I=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={email:"",nota:"",comentario:"",Productid:t.id.params.id},n.handleChanges=n.handleChanges.bind(Object(C.a)(n)),n.handleLocalStorage=n.handleLocalStorage.bind(Object(C.a)(n)),n}return Object(l.a)(a,[{key:"handleChanges",value:function(t){var e=t.target,a=e.name,n=e.value;this.setState(Object(y.a)({},a,n))}},{key:"handleLocalStorage",value:function(){var t=JSON.parse(localStorage.getItem("notas"));t.push(this.state),localStorage.setItem("notas",JSON.stringify(t)),(0,this.props.handleClick)(this.state)}},{key:"render",value:function(){var t=this.state,e=t.email,a=t.nota,n=t.comentario;return localStorage.getItem("notas")||localStorage.setItem("notas","[]"),r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{type:"email",value:e,name:"email",id:"email",placeholder:"Seu Email",onChange:this.handleChanges})),r.a.createElement("select",{value:a,name:"nota",onChange:this.handleChanges},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5")),r.a.createElement("label",{htmlFor:"comment"},r.a.createElement("textarea",{value:n,name:"comentario",id:"comment",type:"text","data-testid":"product-detail-evaluation",onChange:this.handleChanges})),r.a.createElement("button",{type:"button",onClick:this.handleLocalStorage},"Enviar")))}}]),a}(n.Component);I.defaultProps={id:{}};var q=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.id,e=JSON.parse(localStorage.getItem("notas"));return 0===e.length?r.a.createElement("h1",null,"Nenhuma Avalia\xe7\xe3o"):r.a.createElement("div",null,e.filter((function(e){return e.Productid===t.params.id})).map((function(t,e){return r.a.createElement("div",{key:e*Math.random()},r.a.createElement("h5",null,t.email),r.a.createElement("p",null,"Nota:",t.nota),r.a.createElement("p",null,"Coment\xe1rio:",t.comentario))})))}}]),a}(n.Component);q.defaultProps={id:{}};var P=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){var t;Object(i.a)(this,a),t=e.call(this);var n=JSON.parse(localStorage.getItem("amountProductsInCart"));return t.state={product:"",AllComments:[],amountProductsInCart:n},t.handleState=t.handleState.bind(Object(C.a)(t)),t.handleClick=t.handleClick.bind(Object(C.a)(t)),t.handleCartClick=t.handleCartClick.bind(Object(C.a)(t)),t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=Object(f.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(O.getProductsFromCategoryAndQuery)(),this.requestProductApi();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"handleState",value:function(t){this.setState({product:t})}},{key:"handleCartClick",value:function(t){var e=t.target,a=JSON.parse(localStorage.getItem("productList"));a.push(e.name),localStorage.setItem("productList",JSON.stringify(a));var n=this.state.amountProductsInCart+1;this.setState({amountProductsInCart:n}),localStorage.setItem("amountProductsInCart",JSON.stringify(n))}},{key:"handleClick",value:function(t){this.setState((function(e){return{AllComments:[].concat(Object(x.a)(e.AllComments),[t])}}))}},{key:"requestProductApi",value:function(){var t=Object(f.a)(g.a.mark((function t(){var e,a,n,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match,a="https://api.mercadolibre.com/items/".concat(e.params.id),t.next=4,fetch(a);case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,this.handleState(r);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.product,a=t.amountProductsInCart,n=this.props.match;return localStorage.getItem("productList")||localStorage.setItem("productList","[]"),r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"product-detail-name"},e.title),r.a.createElement("img",{src:e.thumbnail,alt:e.title}),r.a.createElement("ul",null,r.a.createElement("li",null,"R$",e.price),r.a.createElement("li",null,"Dispon\xedveis:",e.available_quantity),r.a.createElement("li",null,null!==e.warranty?e.warranty:"Sem Garantia")),r.a.createElement("button",{type:"button","data-testid":"product-detail-add-to-cart",onClick:this.handleCartClick,name:JSON.stringify(e)},"Adcionar ao Carrinho"),r.a.createElement(d.b,{to:"/shoppingcart","data-testid":"shopping-cart-button"},"Carrinho"),r.a.createElement("span",{"data-testid":"shopping-cart-size"},a),r.a.createElement(I,{id:n,handleClick:this.handleClick}),r.a.createElement(q,{id:n}))}}]),a}(n.Component);P.defaultProps={match:{}};var w=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"fullname"},"Nome Completo",r.a.createElement("input",{type:"text","data-testid":"checkout-fullname",id:"fullname",required:!0})),r.a.createElement("label",{htmlFor:"email"},"Email",r.a.createElement("input",{type:"text","data-testid":"checkout-email",id:"email",required:!0})),r.a.createElement("label",{htmlFor:"cpf"},"CPF",r.a.createElement("input",{type:"text","data-testid":"checkout-cpf",id:"cpf",required:!0})),r.a.createElement("label",{htmlFor:"phone"},"Telefone",r.a.createElement("input",{type:"text","data-testid":"checkout-phone",id:"phone",required:!0})),r.a.createElement("label",{htmlFor:"cep"},"CEP",r.a.createElement("input",{type:"text","data-testid":"checkout-cep",id:"cep",required:!0})),r.a.createElement("label",{htmlFor:"address"},"Endere\xe7o",r.a.createElement("input",{type:"text","data-testid":"checkout-address",id:"address",required:!0})))}}]),a}(r.a.Component),L=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.location.state,e=t.products,a=t.total;return r.a.createElement("div",null,r.a.createElement("ul",null,e.map((function(t){return r.a.createElement("li",{key:t.id},t.title,r.a.createElement("p",null,"Quantidade:",t.quantity),r.a.createElement("p",null,"Pre\xe7o unit\xe1rio:",t.price),r.a.createElement("p",null,"Pre\xe7o total:",t.price*t.quantity))}))),r.a.createElement("p",null,"Total:",a),r.a.createElement(w,null),r.a.createElement("button",{type:"submit"},"Comprar"))}}]),a}(r.a.Component),N=function(t){Object(u.a)(a,t);var e=Object(s.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(m.a,{exact:!0,path:"/shoppingCart",component:b}),r.a.createElement(m.a,{exact:!0,path:"/details/:id",component:P}),r.a.createElement(m.a,{exact:!0,path:"/checkout",component:L})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.5a16f79e.chunk.js.map