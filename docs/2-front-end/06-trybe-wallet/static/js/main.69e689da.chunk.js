(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),i=n(24),o=(n(38),n(11)),s=n(9),u=n(10),d=n(13),p=n(12),h=n(3),m=n(17),E=n(4),b=n(15),v=n.n(b),f=n(2),y=n(21),j="LOGIN_ACTION",O="https://economia.awesomeapi.com.br/json/all",g=function(e){return{type:"WALLET_CURRENCY",payload:e}},x=function(e){return{type:"UPDATE_EXPENSE",payload:e}},C=function(e){return{type:j,payload:e}},k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={inputEmail:"",inputPassword:""},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleClick=a.handleClick.bind(Object(E.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(m.a)({},t.name,t.value))}},{key:"handleClick",value:function(){var e=this.state.inputEmail,t=this.props,n=t.history;(0,t.setUserLogin)(e),n.push("/carteira")}},{key:"render",value:function(){var e=this.state,t=e.inputPassword,n=e.inputEmail,a=!1,l=n.match(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/),c=t.length>5;return l&&c&&(a=!a),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login"),r.a.createElement("input",{type:"text",name:"inputEmail",value:n,placeholder:"Email","data-testid":"email-input",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"inputPassword",value:t,placeholder:"Password","data-testid":"password-input",onChange:this.handleChange}),a?r.a.createElement("button",{type:"button",onClick:this.handleClick},"Entrar"):r.a.createElement("button",{type:"button",disabled:!0},"Entrar"))}}]),n}(r.a.Component),T=Object(o.b)(null,(function(e){return{setUserLogin:function(t){return e(C(t))}}}))(k),w=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(E.a)(a)),a.editExpense=a.editExpense.bind(Object(E.a)(a)),a}return Object(u.a)(n,[{key:"handleClick",value:function(){var e=this.props;(0,e.removeListItem)(e.id)}},{key:"editExpense",value:function(){var e=this.props;(0,e.editListItem)(e.id)}},{key:"editNumbers",value:function(e){var t=e.toString(),n=t.indexOf(".");return t.slice(0,n+3)}},{key:"render",value:function(){var e=this.props.item,t=e.value,n=e.description,a=e.method,l=e.currency,c=e.tag,i=e.exchangeRates,o=i[l].name.split("/")[0];return r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,a),r.a.createElement("td",null,t),r.a.createElement("td",null,o),r.a.createElement("td",null,Number(i[l].ask).toFixed(2)),r.a.createElement("td",null,(i[l].ask*t).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:this.editExpense},"Editar"),r.a.createElement("button",{type:"button",onClick:this.handleClick,"data-testid":"delete-btn"},"Remover"))}}]),n}(a.Component),L=Object(o.b)(null,(function(e){return{removeListItem:function(t){return e({type:"DELETE_EXPENSE",payload:t})},editListItem:function(t){return e({type:"EDIT_EXPENSE",payload:t})}}}))(w),F=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={id:0,value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.createExpen=a.createExpen.bind(Object(E.a)(a)),a.formToFill=a.formToFill.bind(Object(E.a)(a)),a.tagLabel=a.tagLabel.bind(Object(E.a)(a)),a.labellabel=a.labellabel.bind(Object(E.a)(a)),a.expenseEdit=a.expenseEdit.bind(Object(E.a)(a)),a}return Object(u.a)(n,[{key:"FormInputText",value:function(e,t,n,a){return r.a.createElement("label",{htmlFor:n},t,r.a.createElement("input",{type:"text",name:n,value:e,id:n,onChange:a}))}},{key:"tagLabel",value:function(e){return r.a.createElement("label",{htmlFor:"tag"},"Tag",r.a.createElement("select",{name:"tag",id:"tag",onChange:this.handleChange},["Alimenta\xe7\xe3o","Lazer","Trabalho","Sa\xfade","Transporte"].map((function(t){return t===e?r.a.createElement("option",{value:t,selected:!0},t):r.a.createElement("option",{key:t,value:t},t)}))))}},{key:"labellabel",value:function(e){return r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento",r.a.createElement("select",{name:"method",id:"method",onChange:this.handleChange},["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"].map((function(t){return t===e?r.a.createElement("option",{value:t,selected:!0},t):r.a.createElement("option",{key:t,value:t},t)}))))}},{key:"handleChange",value:function(e){var t=e.target;this.setState(Object(m.a)({},t.name,t.value))}},{key:"createExpen",value:function(){var e=this.state.id;this.setState({id:e+1}),(0,this.props.attCurrencyThunk)(Object(f.a)({},this.state))}},{key:"formToFill",value:function(){var e=this.props,t=e.currencies,n=e.expensesList.editor,a=this.state,l=a.value,c=a.description;return r.a.createElement("form",null,this.FormInputText(l,"Valor","value",this.handleChange),this.FormInputText(c,"Descri\xe7\xe3o","description",this.handleChange),r.a.createElement("label",{htmlFor:"currency"},"Moeda",r.a.createElement("select",{name:"currency",id:"currency",onChange:this.handleChange},t.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),this.tagLabel(),this.labellabel(),n?r.a.createElement("button",{type:"button",onClick:this.expenseEdit},"Editar despesa"):r.a.createElement("button",{type:"button",onClick:this.createExpen},"Adicionar despesas"))}},{key:"expenseEdit",value:function(){var e=this.props,t=e.editExpense,n=e.id,a=e.expenses[n].exchangeRates;t(Object(f.a)(Object(f.a)({},this.state),{},{id:n,exchangeRates:a}))}},{key:"render",value:function(){var e=this.props.expensesList;return r.a.createElement(r.a.Fragment,null,this.formToFill(),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),0===e.expenses.length?null:e.expenses.map((function(e,t){return r.a.createElement(L,{item:e,key:t,id:t})}))))}}]),n}(a.Component),R=Object(o.b)((function(e){return{expensesList:e.wallet,id:e.wallet.idToEdit,expenses:e.wallet.expenses}}),(function(e){return{attCurrencyThunk:function(t){return e((n=t,function(){var e=Object(y.a)(v.a.mark((function e(t){var a,r,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O);case 2:return a=e.sent,e.next=5,a.json();case 5:r=e.sent,l=Object(f.a)(Object(f.a)({},n),{},{exchangeRates:r}),t({type:"ADD_EXPENSE_ATT_CURR",payload:l});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n},editExpense:function(t){return e(x(t))}}}))(F),D=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.setCurrency)()}},{key:"expensesCalc",value:function(){return this.props.state.wallet.expenses.map((function(e){return(e.exchangeRates[e.currency].ask*e.value).toFixed(2)})).reduce((function(e,t){return t=Number(t),Number((e+=t).toFixed(2))}),0)}},{key:"render",value:function(){var e=this.props.state,t=e.user,n=e.wallet,a=n.currencies,l=n.expenses;return Object.keys(a).splice(1,1),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{"data-testid":"email-field"},t.email),r.a.createElement("p",null,"Gastos: R$",r.a.createElement("span",{"data-testid":"total-field"},0===l.length?0:this.expensesCalc())),r.a.createElement("p",null,"C\xe2mbio:",r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")),r.a.createElement(R,{currencies:a}))}}]),n}(r.a.Component),N=Object(o.b)((function(e){return{state:e}}),(function(e){return{setCurrency:function(){return e(function(){var e=Object(y.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O);case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,(r=Object.keys(a)).splice(1,1),t(g(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(D),_=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{exact:!0,path:"/",component:T}),r.a.createElement(h.a,{exact:!0,path:"/carteira",component:N}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=n(14),S=n(31),A=n(32),I={email:""};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(f.a)(Object(f.a)({},e),{},{email:t.payload});default:return e}},X=n(22),M="",W={editor:!1,idToEdit:null,currencies:[],expenses:[]};var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WALLET_CURRENCY":return Object(f.a)(Object(f.a)({},e),{},{currencies:t.payload});case"ADD_EXPENSE_ATT_CURR":return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(X.a)(e.expenses),[t.payload])});case"DELETE_EXPENSE":return Object(f.a)(Object(f.a)({},e),{},{expenses:[].concat(Object(X.a)(e.expenses.slice(0,t.payload)),Object(X.a)(e.expenses.slice(t.payload+1,e.expenses.length)))});case"EDIT_EXPENSE":return Object(f.a)(Object(f.a)({},e),{},{idToEdit:t.payload,editor:!0});case"UPDATE_EXPENSE":return M=Object(f.a)({},e),console.log(e),console.log(t),M.expenses[t.payload.id]=Object(f.a)({},t.payload),M.editor=!1,M.idToEdit=null,Object(f.a)({},M);default:return e}},B=Object(P.combineReducers)({user:U,wallet:z}),V=Object(P.createStore)(B,Object(S.composeWithDevTools)(Object(P.applyMiddleware)(A.a)));c.a.render(r.a.createElement(o.a,{store:V},r.a.createElement(i.a,null,r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.69e689da.chunk.js.map